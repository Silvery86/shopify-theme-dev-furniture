{{ 'swiper-bundle.min.css' | asset_url | stylesheet_tag }}
<div class="page-width">
  <div class="best-deal flex flex-col md:flex-row items-stretch">
    {% assign product = section.settings['best-deal-product'] %}
    {% if product %}
      <div class="swiper best-deal__slider  w-full md:w-1/2 bg-gray-100 rounded-t-2xl md:rounded-l-2xl md:rounded-t-none">
        <div class="best-deal__gallery swiper-wrapper">
          {% for media in product.media %}
            {% if media.media_type == 'image' %}
              <div class="swiper-slide aspect-square overflow-hidden">
                <img
                  src="{{ media | image_url: width: 600 }}"
                  alt="{{ media.alt | escape }}"
                  width="{{ media.width }}"
                  height="{{ media.height }}"
                  class="w-full h-full object-cover"
                  loading="lazy"
                >
              </div>
            {% endif %}
          {% endfor %}
        </div>
      
      </div>

      <div class="best-deal__content w-full md:w-1/2 flex flex-col justify-center gap-4 bg-gray-800 items-center text-white rounded-b-2xl md:rounded-r-2xl md:rounded-bl-none min-h-[500px]">
        <div class="best-deal__badge text-gray-300 font-light text-[14px]">BEST DEAL</div>
        <div class="best-deal__title text-gray-100 font-semibold text-[24px]">{{ product.title }}</div>
        <div class="best-deal__feature-image">
          {{ product.featured_image |  image_url: width: 160, height: 160 |  image_tag: class: "border-gray-200 rounded-lg" }}
        </div>
        <div class="best-deal__price text-gray-100 font-semibold text-[28px]">{{ product.price | money }}</div>
        <div class="best-deal__button border border-gray-100 px-6 py-3 rounded-3xl">
          <a class="text-gray-100 font-medium text-[16px]">Shop now</a>
        </div>
      </div>
    {% endif %}
  </div>
</div>
<script src="{{ "swiper-bundle.min.js" |  asset_url }}" async></script>
<script async>
  document.addEventListener('DOMContentLoaded', function () {
    const sliderEl = document.querySelector('.best-deal__slider');
    if (sliderEl && typeof Swiper !== 'undefined') {
      new Swiper(sliderEl, {
        slidesPerView: parseInt(sliderEl.dataset.desktop) || 1,
        spaceBetween: 24,
         autoplay: {
            delay: 3000, 
            disableOnInteraction: false 
        },       
        breakpoints: {
          0: {
            slidesPerView: parseInt(sliderEl.dataset.mobile) || 1,
          },
          768: {
            slidesPerView: parseInt(sliderEl.dataset.desktop) || 1,
          },
        },
        loop: true,
      });
    }
  });
</script>
<style>
  .best-deal {
    margin: 56px 0;
  }
  .swiper-button-prev,
  .swiper-button-next {
    display: flex !important;
    width: 40px; /* hoặc kích thước bạn muốn */
    height: 40px;
    align-items: center;
    justify-content: center;
  }
  .swiper-button-prev::after,
  .swiper-button-next::after {
    font-size: 16px;
  }
  .swiper-button-prev {
    left: 0;
  }
  .swiper-button-next {
    right: 0;
  }
</style>
{% schema %}
{
  "name": "Best Deal Banner",
  "class": "best-deal-banner",
  "settings": [
    {
      "type": "product",
      "id": "best-deal-product",
      "label": "Select best deal product"
    }
  ],
  "presets": [
    {
      "name": "Best Deal Banner"
    }
  ],
  "disabled_on": {
    "groups": ["header", "footer"]
  }
}
{% endschema %}
